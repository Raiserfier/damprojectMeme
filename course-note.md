# 第2章 图像素材

## 2.1 图像的基本概念（LY）
### 主流图像格式

### 数字图像的表示

### CCD sensors

### 图像分辨率

图像分辨率指图像中存储的信息量，衡量了采样密度。位图分辨率表示了像素尺寸和物理尺寸间的关系。最常使用的单位是PPI （Pixels Per Inch）。 

#### 常见分辨率

| 名称             | 规格        | 长宽比 | 应用                       |
| ---------------- | ----------- | ------ | -------------------------- |
| VGA              | 640 × 480   | 4: 3   | 广泛用于公共场所的屏幕显示 |
| CCIR601 DV PAL   | 720 × 576   | 4: 3   | PAL DV 和 PAL DVD          |
| CCIR601 PAL full | 768 × 576   | 4: 3   | 平方采样网格比的PAL        |
| SVGA             | 800 × 600   | 4: 3   | 主流投影仪分辨率           |
| XGA              | 1024 × 768  | 4: 3   | 广泛用于笔记本的屏幕分辨率 |
| QVGA             | 1280 × 960  | 4: 3   | 主要用于手机等便携设备屏幕 |
| UXGA             | 1600 × 1200 | 4: 3   | 常用于15英寸屏幕的笔记本   |
| 1080 HDTV        | 1920 × 1080 | 4: 3   | 高分辨率数字电视格式       |
| 2K               | 2048 × 1080 | 1.9: 1 | 数字影院放映及显示设备     |
| 4K               | 4096 × 2160 | 1.9: 1 | 数字影院放映及显示设备     |

### 图像类型

- **二值图像**：图像上的每一个像素只有两种可能的取值：布尔值0和（其中0表示黑色，1表示白色），所以计算机中二值图像的数据类型通常为1个二进制位。

- **灰度图像**： 灰度图像矩阵元素的取值范围通常为 [0，255]。因此其数据类型一般为8位无符号整数的（int8），这就是人们经常提到的 256 灰度图像。“0” 表示纯黑色，“255” 表示纯白色，中间的数字从小到大表示由黑到白的过渡色。 

- **索引图像**： 为了节省表示图像RGB信息的空间用调色板存储彩色信息（RGB值），数据区只存储当前象素的色彩在调色板中的位置，这样就省了很多字节。调色板是颜色的索引，多用于8位图像，即可表示256种颜色。如下图，图像仅仅使用了16种颜色，右图是该图像的调色板：

  

  ![](https://images0.cnblogs.com/blog/442754/201501/212106376109403.png)

  

- **真彩色RGB图像**：最常见的彩色图像为24位RGB模式，即每个像素由红（R）、绿（G）、蓝（B）三个分量表示，分量介于 [0，255]。可以表示 2^24^= 16777216 种颜色。

  

## 2.2 颜⾊空间（ZHJ）

## 2.3 图像压缩⽅法与标准（LXY）
## 2.4 HDR图像（ZBF）
## 2.5 主流图像格式分析（SWX）

常见图像格式

<table>
   <tr>
      <td>分类</td>
      <td>简写</td>
      <td>全程</td>
      <td>特征</td>
   </tr>
   <tr>
      <td rowspan="5">普通类型</td>
      <td>GIF</td>
      <td>图形交换格式</td>
      <td>以超文本标志语言方式显示索引彩色图像</td>
   </tr>
   <tr>
      <td>JPEG</td>
      <td>联合图像专家组</td>
      <td>用有损压缩方式去除冗余的图像和彩色数据</td>
   </tr>
   <tr>
      <td>PNG</td>
      <td>便携式网络图形</td>
      <td>无损压缩的位图片形格式</td>
   </tr>
   <tr>
      <td>TIFF</td>
      <td>标签图像文件格式</td>
      <td>支持很多色彩系统，而且独立于操作系统</td>
   </tr>
   <tr>
      <td>TGA</td>
      <td>Tagged Graphics</td>
      <td>通道效果与方向性</td>
   </tr>
   <tr>
      <td rowspan="2">原始数据</td>
      <td>RAW</td>
      <td>原始图像</td>
      <td>保存信息的损失降到最低</td> 
   </tr>
   <tr>
      <td>DNG</td>
      <td>数字负片</td>
      <td>用于数码相机生成的原始数据文件的公共存档格式</td>
   </tr>
   <tr>
      <td rowspan="3">平台特殊格式</td>
      <td>BMP</td>
      <td>位图</td>
      <td>Windows操作系统中的标准图像文件格式</td>
   </tr>
   <tr>
      <td>PICT</td>
      <td></td>
      <td>PICT是Mac上常见的数据文件格式之一</td>
   </tr>
   <tr>
      <td>PPM</td>
      <td>可移植像素图格式</td>
      <td> 一种linux图片格式</td>
   </tr>
   <tr>
      <td>矢量格式数据</td>
      <td>WMF</td>
      <td>图元文件</td>
      <td>是微软公司定义的一种Windows平台下的图形文件格式</td>
   </tr>
   <tr>
      <td colspan="4">more...</td>
   </tr>
</table>

### GIF

##### 历史

- 1987年6月15日，gif在CompuServe公司诞生，取名87A，改进了具有256色的黑白图像传输以及使用图形控制扩展（GCE），通过定时延迟实现了动画效果。

- 起初，gif要解决的问题是：如何使计算机显示图像同时节省内存？gif的设计初衷是用于在计算机之间交换图像，这也是它得名为“图形交换形式”的原因，甚至在线的第一张彩色图片的格式就是gif格式的图片

- 1995年，Unisys Corp.公司对它拥有的专利，LZW算法，也就是gif实现压缩的核心算法，收取专利费。这一举措导致gif图片一度险些被淘汰（特别是开发人员们绕过LZW算法研究出了PNG格式图片时）。

- 2004年，专利的收费在全球都暂停了，但是gif在静态图片的市场已经被淘汰，但是凭借其革命性的压缩算法，它依旧垄断了动态图像的市场直至今日。

- 第一张火遍互联网的gif

  ![](https://upload-images.jianshu.io/upload_images/4412858-596a504c11f0561b.gif?imageMogr2/auto-orient/strip|imageView2/2/format/webp)

##### 格式详解

GIF文件由一系列数据块组成。前两个块是固定长度和固定格式。后面的是可变长度，但可以自我描述。它们由一个标识块类型的字节，一个有效载荷长度字节，一个有效载荷组成。

下图显示了所有不同类型的块以及它们在文件中的位置。（中间箭头循环的部分可以重复多次）

![](http://giflib.sourceforge.net/whatsinagif/gif_file_stream.gif)

1. Header 标头块

   前三个字节称为签名。这些值应始终为“ GIF”（即47 =“ G”，49 =“ I”，46 =“ F”）。

   接下来的三个指定 用于编码图像的规范版本。

2. Logical Screen Descriptor 逻辑屏幕描述符

   该块告诉解码器此图像将占用多少空间。

   ![](http://giflib.sourceforge.net/whatsinagif/logical_screen_desc_block.gif)

3. Global Color Table 全局色表（可选）

   实质上是颜色的索引表，一次读取三个字节以获取每种颜色。比如，第一种颜色是#FFFFFF，该值的索引为0。

4. Graphic Control Extension 图形控件扩展

   图形控件扩展块用于指定透明度设置和控制动画。

   ![](http://giflib.sourceforge.net/whatsinagif/graphic_control_ext.gif)

   - 透明度设置

     在颜色表中设置一种颜色，该颜色将转换为“不可见墨水”。然后，在绘制图像时，每当遇到这种特殊颜色时，背景就会被显示出来。

     第一步，透明色标志设置为1，即图形控件扩展的打包字节中的最低位。这将告诉解码器我们希望图像具有透明成分。第二步，设置特定颜色作为不可见墨水，这种颜色必须在活动颜色表中，并且可以通过将该值设置为颜色表中颜色的索引，在“透明颜色索引”字节中指定其值。

     假设白色的索引值为0，并且想要设定白色为透明颜色，那么透明颜色索引块（Transparent Color Index)指定值00。

   - 动画

     打包字段(Packed Field）存储三个值。前三个（最高）位被“保留以备将来使用”，因此这些位保留为零。

     接下来的三位指示处置方法，指定当移至下一个图像时当前图像数据会发生什么情况，可以通过用户自定义。值为1，这告诉解码器将图像保留在原处并在其顶部绘制下一个图像，值为2意味着应该将画布恢复为背景色，值为3表示解码器应在绘制当前图像之前将画布还原到其先前状态。

5. Image Descriptor 图像描述符

   一个GIF文件可能包含多个图像。每个图像都以一个图像描述符块开头。该块正好是10个字节长。

   第一个字节是图像分隔符2C。接下来的8个字节表示下一张图像的位置和大小。

   最后一个字节也是一个压缩字段。字节中的第一个（最高有效）位是本地颜色表标志。将此标志设置为1允许您指定后面的图像数据使用与全局色表不同的色表。

   第二位是隔行标志。隔行扫描在显示器上的效果是的第一遍会立即出现，首先将图形显示为模糊，然后将其锐化，随后的遍历将填充行。

6. Local Color Table 本地色表

   仅对紧随其后的图像数据块有效的色表

7. Image Data 图像数据

   LZW编码后的图像数据，LZW的具体编码过程已在之前的部分展示，这里将略过。

   该块的第一个字节是LZW最小代码大小。该值用于解码压缩的输出代码。其余字节代表数据子块。数据子块是1-256字节的组。子块中的第一个字节告诉您随后有多少个字节的实际数据。

8. Plain Text Extension 纯文本扩展名

   GIF89规范允许您指定要在下一张图像上叠加的文本标题。此功能从未实现。

9. Application Extension 应用扩展

   GIF89规范允许将特定于应用程序的信息嵌入到GIF文件本身中。此功能使用不多。

10. Comment Extension 注释扩展

    可以将ASCII文本嵌入到GIF文件中，并且有时用于包含图像描述，图像信用或其他人类可读的元数据，例如图像捕获的GPS位置。

    ![](http://giflib.sourceforge.net/whatsinagif/comment_ext.gif)

    第一个字节是扩展介绍者21。下一个字节始终是注释标签FE。数据子块用于注释。最后一个字节 00代表注释到达末尾。

11. Trailer 尾部

    始终未3B，标记结尾。

##### 特征

- 有限的颜色表

  单个GIF图像中最多只能引用256种颜色。尽管此有限的调色板可以减小文件大小，并且在屏幕上观看时完全可以接受。

- 颤动

  用于限制文件大小的另一个技巧是抖动。抖动并不是GIF的真正功能，它只是GIF图像中经常使用的一种技术。

  通过将较少数量的彩色“点”混合在一起，该技术可用于创建更大色深的幻觉。

  当能够显示的颜色少于原始图像中显示的颜色时，则使用相邻像素的图案来模拟显示不足的颜色的外观。

- LZW

  无损压缩算法

- 透明度

  可以在处理显示设备的图像时忽略调色板中一种颜色的指定。

- 隔行扫描

  通过首先显示图像的低分辨率版本并逐渐显示完整版本，这种机制可以使图像在屏幕上显示更快。

- 动画

  为文件头添加了一些增强功能，使Netscape等浏览器可以按定时和/或循环顺序显示多个GIF图像。这种机制允许制作较小的粗略动画，这是横幅广告中经常使用的非常流行的功能。

- 解析度

  大多数GIF图像的分辨率在72到90 dpi之间，非常适合在屏幕上查看，但不足以用于印刷使用。

### PNG

### JPEG

### TIFF





## 2.6 ⼩结（LY）

### 图像储存的重要概念

- 分辨率
- 编码率
  - 1bbp, 2bbp, ...
  - 编码模式
- 色彩表示
  - RGB, YUV, Lab...

### 图像格式转换工具

- ACDSEE
- imagemagik (Linux)
- XnView

---

DDL
11.25（稍微给一点时间整理）

要求
https://github.com/hongxin/DAMCourse-2019/blob/master/pdf/dam2019-hw05.pdf

- 中文；总共>10页A4纸/>5k字（每个人的part>1k字）
- 插入的图片用网络图片不保存本地
- 段落中要能够对于相关知识点概念清楚，有叙述，有表达，独立成段，避免单纯从课件复制

课件
https://github.com/hongxin/DAMCourse-2019/blob/master/pdf/dam2019-02.pdf

模板
https://github.com/hongxin/DAMCourse-2019/edit/master/course-note.md
